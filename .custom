# Path settings
export PATH=~/bin:/usr/local/bin:/usr/local/sbin:/usr/bin:/usr/sbin:/bin:/usr/X11/bin:/sbin:$HOME/.rvm/bin:/usr/local/share/npm/bin:$HOME/dev/play-2.2.0:$HOME/dev/arcanist/arcanist/bin:$HOME/dev/android-sdk-macosx/platform-tools:$HOME/dev/android-sdk-macosx/tools:$HOME/dev/android-sdk-macosx/build-tools/19.1.0
export ANDROID_HOME=~/dev/android-sdk-macosx
[[ -s "$HOME/.rvm/scripts/rvm" ]] && . "$HOME/.rvm/scripts/rvm"

# Python startup file
export PYTHONSTARTUP="$HOME/.pythonrc"

# Change default editor
export EDITOR="vim"

# grc
source "`brew --prefix grc`/etc/grc.bashrc"

# Shortcuts
alias whois="whois -h whois-servers.net" # Enhanched WHOIS lookups
alias undopush="git push -f origin HEAD^:master" # Undo a `git push`
alias lsd='ls -l | grep "^d"' # list only directories
alias vim='mvim -v'
alias d="cd ~/Dropbox"
alias o="open ."
alias ..="cd .."
alias ...="cd ../.."
alias g="git"
alias v="vim"
alias s="subl ."
alias la='ls -lAhFG'
alias l="la"
alias hgfpush="hg pull -u && hg merge && hg ci -m 'merged' && hg push"
alias hosts='sudo vim /etc/hosts'
alias c="tr -d '\n' | pbcopy" # Trim new lines and copy to clipboard
alias rot13='tr a-zA-Z n-za-mN-ZA-M' 
alias flush="dscacheutil -flushcache" # Flush Directory Service cache

# View HTTP traffic
sniff()
{
  sudo ngrep -d $1 -t '^(GET|POST) ' 'tcp and port 80'
}
alias sniff=sniff
httpdump()
{
  sudo tcpdump -i $1 -n -s 0 -w - | grep -a -o -E \"Host\: .*|GET \/.*\"
}
alias httpdump=httpdump

# Show/hide hidden files in Finder
alias show="defaults write com.apple.Finder AppleShowAllFiles -bool true && killall Finder"
alias hide="defaults write com.apple.Finder AppleShowAllFiles -bool false && killall Finder"

# Hide/show all desktop icons (useful when presenting)
alias hidedesktop="defaults write com.apple.finder CreateDesktop -bool false && killall Finder"
alias showdesktop="defaults write com.apple.finder CreateDesktop -bool true && killall Finder"

# IP addresses
alias ip="dig +short myip.opendns.com @resolver1.opendns.com"
alias ips="ifconfig -a | perl -nle'/(\d+\.\d+\.\d+\.\d+)/ && print $1'"

# VirtualEnv cd
workon_virtualenv() {
  if [ -e .git ]; then
    current_dir="${PWD##*/}"
    if [ -e ~/virtualenvs/$current_dir ]; then
      deactivate >/dev/null 2>&1
      source ~/virtualenvs/$current_dir/bin/activate
    fi
  fi
}

virtualenv_cd() {
  cd "$@" && workon_virtualenv
}

alias cd="virtualenv_cd"

#tmux
[[ -s $HOME/.tmuxinator/scripts/tmuxinator ]] && source $HOME/.tmuxinator/scripts/tmuxinator

# vim using
alias vim="mvim"

alias rm='nocorrect rm'
